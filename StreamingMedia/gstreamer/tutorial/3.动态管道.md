#### 3 动态管道

> 本章节展示了使用GStreamer所需的其他基本概念，这些概念允许在信息可用时“动态”构建管道，而不是在应用程序开始时定义一个整体管道。本节的要点：
>
> * 如何在链接元素时实现更精细的控制。
> * 如何收到有趣事件的通知，以便您及时做出反应。
> * 元素可以处于的各种状态。

##### 3.1 核心函数

> 在本节你可以看到，在设置为播放状态之前，管道还没有完全创建。这没有问题，但是当数据到达管道末端时，如果进一步不处理，管道将会停止并产生一个错误消息。本小节将会处理这个问题

###### 1. 介绍

在本节小节，我们打开一个多路复用的文件（音频和视频存储在一个文件中）。负责打开此类容器的元素称为解复用（ *demuxers*），一些样例的容器格式：Matroska (MKV)、Quick Time (QT, MOV)、Ogg、Advanced Systems Format (ASF, WMV, WMA)。

如果一个容器嵌入了多个流（例如一个视频和两个音轨），解复用器会将它们分开，并通过不同的输出端口暴漏。通过这种方式，可以在管道中创建不同的分支，处理不同类型的数据。

GStreamer 元素组件之间相互链接的端口被叫做pads（GstPad）。source类型的元素组件只包含source pads，sink类型元素组件只包含sink pads，filter类型的元素组件，两者都包含。

解复用类型的元素组件包含一个sink pad，数据通过sink pad到达元素组件，和多个source pads，每个source pad对应容器中的流。

![filter-element-multi](resource-3\filter-element-multi.png)

**完整流程如下图：**有一个管道，其中包含一个解复用器和两个分支，一个用于音频，另一个用于视频。

![simple-player](resource-3\simple-player.png)

上面的图并不是本章节要构建的管道。

处理解复用组件，它们无法产生任何信息。解决办法是构建从源代码到解复用器的管道，并将其设置为运行（播放）。当demuxer收到足够的信息来了解容器中流的数量和类型时，它将开始创建source pad。本小节，我们将完成管道创建，并将其连接到demuxer。
为了简单起见，在这个例子中，我们只链接到音频板，忽略视频。



